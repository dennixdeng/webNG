<div style="margin: auto;max-width:800px;position: relative">
    <div style="background-color: gray;color:white;padding:5px">
        <h3>文档编辑器
            <button class="pure-button pure-button-primary" ng-click="saveDoc()" ng-blur="serverMessage=''" style="margin-left:50px ">保存</button>
            <span style="margin-left: 50px;font-size: 12px;">{{serverMessage}}</span>
        </h3>
    </div>

    <div  ng-hide="doc.inLists|docEditable:allLists">本文档属于{{doc.inLists.length}}个列表
        <div ng-repeat="item in allLists" class="listBtn" ng-class="( -1 == doc.inLists.indexOf(item._id) )?'falseList':'trueList'" ng-click="toggleList(item._id)">{{item.name}}</div>
    </div>

    <div style="padding:10px;font-size:20px">
        <label>标题 </label>
        <input type="text" ng-model="doc.title" ng-change="title_error=''"
               style="width: 500px;padding:2px;border: none; border-bottom: solid 1px blue"/>
        <span style="color:red">{{title_error}}</span>
    </div>
    <div id="docPreview" style="margin:10px;width:80%;padding:5px;">
        <div ng-repeat="para in doc.paraList" style="margin: 5px;position: relative"
             ng-mouseover="delBtnShow=$index" ng-mouseout="delBtnShow=-1"
             ng-class="($index==delBtnShow)?'activePara':''"   >
            <div class="pure-control-group" style="position: absolute;right:5px;top:5px" ng-show="delBtnShow == $index">
                <button class="pure-button" ng-click="removePara($index)">删除</button>
                <button class="pure-button" ng-click="editPara($index)">编辑</button>
                <button class="pure-button" ng-click="newHtml($index)" >插入文字</button>
                <button class="pure-button" ng-click="newImage($index)" >插入图片</button>
                <button class="pure-button" ng-click="newAttachment($index)" >插入附件</button>
            </div>

            <div ng-show="para.html" ng-bind-html="para.html.show"></div>
            <img ng-show="para.image" style="display:block;margin:10px auto;max-width: 600px" ng-src="{{para.image.url}}"/>
            <div ng-show="para.attachment" style="padding: 20px">
                <img src="images/fileDownload2.png" style="height: 20px;margin-bottom: -5px">
                附件 - {{para.attachment.name}}
            </div>

        </div>
    </div>
    <div style="margin: 20px">
        <button class="pure-button " ng-click="newHtml(-1)" >添加文字</button>
        <button class="pure-button " ng-click="newImage(-1)" >添加图片</button>
        <button class="pure-button " ng-click="newAttachment(-1)" >添加附件</button>
    </div>
    <div ng-show="editing==1" class="contentPool" >
        <textarea id="docEditinput" name="docEditinput"></textarea>
        <button class="pure-button" ng-click="editing=0;addHtml()" style="position: absolute;right:95px;bottom:5px">{{replace?'完成编辑':'加入文字'}}</button>
        <button class="pure-button" ng-click="editing=0" style="position: absolute;right:5px;bottom:5px">取消</button>
    </div>
    <div ng-show="editing==2" class="contentPool">
      <div class="titleBar" style="width: 100%">
          <span style="margin-left: 60px;font-size: 44px">图片库</span>
          <button class="pure-button" ng-click="editing=0" style="float:right; margin: 15px">{{(uploadPercet<100)?'上传进度 ' +uploadPercet+'%':'上传图片' }}</button>
          <input type="file" class="pure-button" ng-file-select="onFileSelect($files)" style="float:right; margin: 15px -130px 15px 15px; opacity: 0;width:80px" multiple>

          <button class="pure-button" ng-click="editing=0" style="float:right; margin: 15px">取消</button>
      </div>
      <div  style="overflow: auto;width:100%;height: 100%;font-size: 14px"
            ng-file-drop="onFileSelect($files)" ng-file-drag-over-class="optional-css-class">
        <div style="padding-top: 100px">
            <div ng-repeat="item in imagePoolData"
                 style="margin: 8px; box-shadow: 0px 0px 15px #aaa; cursor: pointer; display: inline-table;">
                <img src="images/delete.png" style="width:20px" ng-click="deleteImage($index)">
                <div  ng-click="addImage($index)"
                     style="background:url({{item.url}})  no-repeat center;background-size:contain;width:180px; height:180px;
                        word-wrap:break-word;word-break:break-all;font-size:12px" >
                    <span style="margin-left:30px;margin-top:-20px;">{{item.name}}</span>
                </div>
            </div>
        </div>
      </div>
    </div>
    <div ng-show="editing==3" class="contentPool">
        <div class="titleBar" style="width: 100%">
            <span style="margin-left: 60px;font-size: 44px">附件库</span>
            <button class="pure-button" ng-click="editing=0" style="float:right; margin: 15px">{{(attUploadPercet<100)?'上传进度 ' +attUploadPercet+'%':'上传附件' }}</button>
            <input type="file" class="pure-button" ng-file-select="onAttachmentSelect($files)" style="float:right; margin: 15px -130px 15px 15px; opacity: 0;width:80px" multiple>
            <button class="pure-button" ng-click="editing=0" style="float:right; margin: 15px">取消</button>
        </div>
        <div  style="overflow: auto;width:100%;height: 100%"
              ng-file-drop="onAttachmentSelect($files)" ng-file-drag-over-class="optional-css-class">
          <div  style="padding-top: 100px">
            <div ng-repeat="item in attachmentPoolData"
                style="height:18px; margin: 3px; cursor: pointer;display: block;border-bottom: solid 1px #eeeeee;vertical-align: top">
                <img src="images/delete.png" style="width:12px" ng-click="deleteAttachment($index)">
                <span ng-click="addAttachment($index)" style="word-wrap:break-word;word-break:break-all;font-size:12px">
                   {{item.showName}} <span style="color: #dddddd">源文件名：{{item.name}}</span>
                </span>
            </div>
          </div>
        </div>
    </div>
</div>